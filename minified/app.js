!function(e,t,n){"use strict";var a,o=function(){C.addClass("set-time"),k.addClass("set-time")},i=function(e){e&&e.preventDefault(),v.blur(),C.className="overlay",k.className="icons"},s=function(){p.textContent="From "+r.humanize(),reqAnim(c)},c=function(){var e,t,n,a=moment.duration(m.diff()),o=a.get("H"),i=a.get("m"),s=a.get("s"),d=360*(r.asMilliseconds()-a.asMilliseconds())/r.asMilliseconds()-90;o<=0&&i<=0&&s<=0?l():h||(b.textContent="",e=1==o.toString().length?"0"+o:o,t=1==i.toString().length?"0"+i:i,n=1==s.toString().length?"0"+s:s,o>0&&(b.textContent+=e+":"),b.textContent+=t+":"+n,u.clearRect(0,0,g.width,g.height),u.beginPath(),u.arc(g.width/2,g.height/2,g.height/2-2,u.toRadian(d),u.toRadian(-90)),u.strokeStyle="#fd695d",u.lineWidth=2,u.stroke(),reqAnim(c))},l=function(){f.removeClass("counting").addClass("done"),g.addClass("done"),u.clearRect(0,0,g.width,g.height),u.beginPath(),u.arc(g.width/2,g.height/2,g.height/2-2,u.toRadian(-90),u.toRadian(270)),u.strokeStyle="#fd695d",u.lineWidth=2,u.stroke(),a.play(),d=!1,h=!1,r=!1,m=!1},d=!1,h=!1,r=!1,m=!1,g=get("canvas"),u=g.getContext("2d"),f=get(".timer"),v=get(".close"),C=get(".overlay"),k=get(".icons"),b=get(".remaining"),p=get(".desc"),w=getEm(".input"),y=get(".icons .fa.fa-clock-o"),R=get(".overlay form"),x=(get("button.set-time"),get("button.cancel"));f.on("click",function(e){var t,n;a&&!d&&(a.pause(),a=!1,g.removeClass("done"),f.removeClass("done"),p.textContent="Add time",u.clearRect(0,0,g.width,g.height)),d?h?(t=moment().diff(h),r=moment.duration(t+r.asMilliseconds()),m=m.add(t),h=!1,reqAnim(c)):(n||(n=new Date),h=moment(n)):o()}),y.on("click",o),e.on("hashchange",function(e){var t,a,o=n.hash.match(/\d+/);if(!o||!o.length)return!1;o=o[0],t=parseInt(o/60/60),o-=60*t*60,a=parseInt(o/60),o-=60*a,w.forEach(function(e){switch(e.name){case"h":e.value=t;break;case"m":e.value=a;break;case"s":e.value=o}})}),R.on("submit",function(e){var t,n;e.preventDefault(),(a=new Audio("audio/bell.mp3")).loop=!0,a.on("canplaythrough",function(e){a.play(),a.pause()}),n=0,t||(t=new Date),f.hasClass("done")&&(f.removeClass("done"),g.removeClass("done")),d=moment(t),w.forEach(function(e){var t=1e3*Number(e.value);if(t)switch(e.name){case"h":n+=60*t*60;break;case"m":n+=60*t;break;case"s":n+=t}}),r=moment.duration(n),m=moment().add(r),h=!1,f.addClass("counting"),s(),i()}),v.on("click",i),x.on("click",i),h||o(),e.fn.hashchangefalse(),g.width=g.offsetWidth,g.height=g.offsetHeight}(this,document,location);